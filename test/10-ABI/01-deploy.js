const Web3 = require('web3');
const fs = require('fs');
const web3 = new Web3(new Web3.providers.HttpProvider('http://127.0.0.1:7545'));
// 获取合约的ABI文件
const myContractABI = JSON.parse(fs.readFileSync(`${__dirname}/myContract.abi`).toString());
// 合约的十六进制编码值
const data = "0x608060405234801561001057600080fd5b506040518060400160405280600481526020017f6c697374000000000000000000000000000000000000000000000000000000008152506001908051906020019061005c9291906100ae565b506040518060400160405280600c81526020017f736f6d65206d6573736167650000000000000000000000000000000000000000815250600090805190602001906100a89291906100ae565b50610159565b828054600181600116156101000203166002900490600052602060002090601f0160209004810192826100e4576000855561012b565b82601f106100fd57805160ff191683800117855561012b565b8280016001018555821561012b579182015b8281111561012a57825182559160200191906001019061010f565b5b509050610138919061013c565b5090565b5b8082111561015557600081600090555060010161013d565b5090565b6107fa806101686000396000f3fe60806040526004361061004a5760003560e01c806306fdde031461004f57806344e649b7146100df57806390ad7f54146100e9578063982296a814610179578063ec6070f6146102ba575b600080fd5b34801561005b57600080fd5b50610064610382565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100a4578082015181840152602081019050610089565b50505050905090810190601f1680156100d15780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6100e7610420565b005b3480156100f557600080fd5b506100fe610422565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561013e578082015181840152602081019050610123565b50505050905090810190601f16801561016b5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561018557600080fd5b5061023f6004803603602081101561019c57600080fd5b81019080803590602001906401000000008111156101b957600080fd5b8201836020820111156101cb57600080fd5b803590602001918460018302840111640100000000831117156101ed57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506104c4565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561027f578082015181840152602081019050610264565b50505050905090810190601f1680156102ac5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156102c657600080fd5b50610380600480360360208110156102dd57600080fd5b81019080803590602001906401000000008111156102fa57600080fd5b82018360208201111561030c57600080fd5b8035906020019184600183028401116401000000008311171561032e57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506105a8565b005b60018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156104185780601f106103ed57610100808354040283529160200191610418565b820191906000526020600020905b8154815290600101906020018083116103fb57829003601f168201915b505050505081565b565b606060008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156104ba5780601f1061048f576101008083540402835291602001916104ba565b820191906000526020600020905b81548152906001019060200180831161049d57829003601f168201915b5050505050905090565b60607f52b54003f649c6d5ca97ae2b169c38f3c257eb14026ad745b11808153cdfd152826040518080602001828103825283818151815260200191508051906020019080838360005b8381101561052857808201518184015260208101905061050d565b50505050905090810190601f1680156105555780820380516001836020036101000a031916815260200191505b509250505060405180910390a16105a16040518060400160405280600581526020017f68656c6c6f000000000000000000000000000000000000000000000000000000815250836105c2565b9050919050565b80600090805190602001906105be929190610719565b5050565b6060600083905060008390506000815183510167ffffffffffffffff811180156105eb57600080fd5b506040519080825280601f01601f19166020018201604052801561061e5781602001600182028036833780820191505090505b50905060008190506000805b85518110156106985785818151811061063f57fe5b602001015160f81c60f81b83838060010194508151811061065c57fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350808060010191505061062a565b5060005b845181101561070a578481815181106106b157fe5b602001015160f81c60f81b8383806001019450815181106106ce57fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350808060010191505061069c565b50829550505050505092915050565b828054600181600116156101000203166002900490600052602060002090601f01602090048101928261074f5760008555610796565b82601f1061076857805160ff1916838001178555610796565b82800160010185558215610796579182015b8281111561079557825182559160200191906001019061077a565b5b5090506107a391906107a7565b5090565b5b808211156107c05760008160009055506001016107a8565b509056fea26469706673582212201a1e065ec2ed79dc1084ff10b571b42acf55f528b237eb8247e786f651ff492664736f6c63430007060033";
const myContract = new web3.eth.Contract(myContractABI);

// // 部署合约
// myContract.deploy({
//     data
// }).send({
//     from: "0x082f86d84938583ce4501F59Dc5Dd4675648fD2A",
//     gas: 1500000,
//     gasPrice: "1000000"
// }, function(err, res) {
//     console.log(res); // TX hash
// })

// // 查看合约
// const myContractAddress = "0x861172C8665D0657B86631B83A3a58e0FB452C54";
// const myContract1 = new web3.eth.Contract(myContractABI, myContractAddress);
// console.log(myContract1.options);

